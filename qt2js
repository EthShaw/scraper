#!/bin/bash
#qt2js
#converts quicktab to a .js file
gawk 'BEGIN {ct=0}
    {ct++; team[ct]=$1; lat[ct]=$2; lng[ct]=$3}
    END {
        printf "//teams.js - this file is generated from a scraper from thebluealliance.com\n"
                printf "//           and geocoding programs.  Please do not edit directly!\n"
        printf "var teams=[\n\t";
        for (i=1; i<=ct; i++) {
            printf "%4d", team[i];
            if (i<ct) printf ", ";
            if (i%10 == 0) printf "\n\t";
        }
        printf " ],\n";
        printf "  coordinates=[\n";
        for (i=1; i<=ct; i++) {
            printf "\t{ lat: %8.3f, lng: %8.3f}%s\n",
                    lat[i], lng[i],(i==ct)?"":",";
        }
        printf "  ]\n";
    }' data/quicktab > teams.js
